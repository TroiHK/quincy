function loadFilterEvents(e,t){for(var i in t.filters){var l=t.filters[i];"list"===l.type?listFilterClickEvent(l.list_id,e,t):"select"===l.type?selectFilterChangeEvent(l.select_id,e,t):"slider"===l.type?sliderFilterSlideEvent(l,e,t):"input"===l.type&&inputFilterChangeEvent(l.input_id,e,t)}}function sliderFilterSlideEvent(e,t,i){var l={min:9999999999999,max:0};if("undefined"==typeof e.min||"undefined"==typeof e.max)for(var n in t){var a=t[n];for(var r in a.links.units){var s=a.links.units[r],o=parseInt(s[e.field_to_filter_on]);"undefined"==typeof e.min?o<l.min&&(l.min=o):l.min=e.min,"undefined"==typeof e.max?o>l.max&&(l.max=o):l.max=e.max}}else l.min=e.min,l.max=e.max;if(l.min=parseInt(l.min),l.max=parseInt(l.max),""===$(e.input_id).val()){var f=e.format.before+l.min+e.format.after,d=e.format.before+l.max+e.format.after;$(e.input_id).val(f+" "+e.format.split+" "+d)}$(e.input_id).data("ui-slider-handle-index")||$(e.slider_id).slider({range:!0,min:l.min,max:l.max,values:[l.min,l.max],slide:function(t,i){var l=e.format.before+i.values[0]+e.format.after,n=e.format.before+i.values[1]+e.format.after;$(e.input_id).val(l+" "+e.format.split+" "+n)}}),$(e.slider_id).on("slidestop",function(e,l){filterFloorplans(t,i)})}function selectFilterChangeEvent(e,t,i){$(e).change(function(){filterFloorplans(t,i)})}function listFilterClickEvent(e,t,i){$(e+" li a").click(function(e){e.preventDefault();var l=$(this).parent("li").parent("ul").attr("id"),n=[];for(var a in i.filters){var r=i.filters[a];if(r.list_id=="#"+l){n=r;break}}n!==[]?($(n.list_id+" li."+n.selected_class).removeClass(n.selected_class),$(this).parent().addClass(n.selected_class),filterFloorplans(t,i)):console.log("filter not found")})}function inputFilterChangeEvent(e,t,i){$(e).change(function(){filterFloorplans(t,i)})}function getFilters(e){var t=[];null!==e.filters.building.type&&(t.building=getCurrentBuilding(e));for(var i in e.filters){var l=e.filters[i];if("list"===l.type)t[i]=$(l.list_id+" li."+l.selected_class+" a").attr("data-value");else if("select"===l.type)t[i]=$(l.select_id).val();else if("slider"===l.type){var n=$(l.input_id).val(),a=n.match(/(\d+)/g);t[i]=[],t[i].length=2,t[i].min=parseInt(a[0]),isNaN(t[i].min)&&(t[i].min=l.min),t[i].max=parseInt(a[1]),isNaN(t[i].max)&&(t[i].min=l.max)}else"input"===l.type&&(t[i]=$(l.input_id).val())}if("undefined"!=typeof e.filters.moveindate){var r=t.moveindate;t.moveindate=[];var s=new Date;s.setDate(s.getDate()+e.filters.moveindate.min),s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0);var o;"false"===r||""===r?r=e.filters.moveindate.max:"input"==e.filters.moveindate.type&&(o=new Date(r)),void 0===o&&(o=new Date,o.setDate(o.getDate()+r)),o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),t.moveindate.min=s,t.moveindate.max=o}return t}function filterFloorplans(e,t){void 0!==t.before_filter_callback&&null!==t.before_filter_callback&&t.before_filter_callback(e,t);var i=getFilters(t),l=[],n=[];$.each(e,function(){var e=!0;for(var a in t.filters){var r=t.filters[a];if(void 0!==r.filter_function&&(e=r.filter_function(this,i),!e))break}e?l.push(this):n.push(this)}),$.each(n,function(){$("#"+t.floorplan_id_start_with+this.id).hide()}),$.each(l,function(){$("#"+t.floorplan_id_start_with+this.id).show()}),void 0!==t.after_filter_callback&&null!==t.after_filter_callback&&t.after_filter_callback(e,t)}var config={floorplan_id_start_with:"fp",filters:{building:{type:null},bedrooms:{type:"list",list_id:"#fp-filters--bedrooms",selected_class:"selected",filter_function:function(e,t){var i=e.bedroomcount,l=(t.bedrooms.toString(),parseInt(t.bedrooms).toString());return"false"===t.bedrooms||(isNaN(t.bedrooms)?void 0:i===l)}},moveindate:{type:null},floor:{type:null},price:{type:null}},before_filter_callback:function(e,t){},after_filter_callback:function(e,t){}};"undefined"!=typeof floorplans&&$(function(){loadFilterEvents(floorplans,config),filterFloorplans(floorplans,config)});